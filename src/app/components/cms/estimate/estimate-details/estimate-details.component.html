<div class="container">
  <h2>Estimate Request Details</h2>
  <hr />
  <div class="request-box">
    <ng-container *ngIf="estimateDetails">
      <div id="details">
        <div id="details-item">
          <p><strong>Name</strong></p>
          <p>{{ estimateDetails.name }}</p>
        </div>
        <div id="details-item">
          <p><strong>Message</strong></p>
          <p>{{ estimateDetails.message }}</p>
        </div>
        <div id="details-item">
          <p><strong>Phone</strong></p>
          <p>{{ estimateDetails.phone }}</p>
        </div>
        <div id="details-item">
          <p><strong>Email</strong></p>
          <p>{{ estimateDetails.email }}</p>
        </div>
        <div id="details-item">
          <p><strong>Created</strong></p>
          <p>{{ estimateDetails.created | date : "short" }}</p>
        </div>
        <div id="details-item">
          <p><strong>Updated</strong></p>
          <p>{{ estimateDetails.updated | date : "short" }}</p>
        </div>
      </div>
    </ng-container>

    <ng-container *ngIf="estimateForm">
      <form [formGroup]="estimateForm" (ngSubmit)="onSubmit()">
        <label for="note"><strong>Note</strong></label>
        <textarea
          class="form-control"
          type="text"
          placeholder="Note"
          formControlName="note"
        ></textarea>
        <br />
        <label for="status"><strong>Status</strong></label>
        <select class="form-select" formControlName="status">
          <option *ngFor="let status of statuses" [value]="status.value">
            {{ status.value }}
          </option>
        </select>
        <div id="buttons">
          <button type="submit" class="btn btn-primary">Save</button>
          <button type="button" (click)="openModal(template)" class="btn btn-danger">Delete</button>
          <button routerLink="/cms/estimate/list" class="btn btn-secondary">
            Back
          </button>
        </div>
      </form>
    </ng-container>
  </div>
</div>

<ng-template #template>
    <div class="modal-body text-center">
      <p>Are you sure you want to delete estimate request info?</p>
      <button
        type="button"
        class="btn btn-default"
        (click)="confirm(estimateDetails.id)"
      >
        Yes
      </button>
      <button type="button" class="btn btn-primary" (click)="decline()">
        No
      </button>
    </div>
  </ng-template>
